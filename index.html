<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>Roblox Western Revolver</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
<style>
html,body{margin:0;overflow:hidden;background:#000;font-family:sans-serif}

/* UI */
#ui{position:fixed;top:10px;left:10px;z-index:10;color:white}
#ui div{background:rgba(0,0,0,.5);padding:6px 10px;border-radius:6px;margin-bottom:6px}
#reload{color:#ffd27d;font-weight:bold}

/* ë²„íŠ¼ */
button{
  position:fixed;right:20px;
  padding:12px;border:none;
  border-radius:12px;font-size:20px;
  z-index:10
}
#shoot{bottom:20px}
#reloadBtn{bottom:80px}
#view{bottom:140px}
</style>
</head>
<body>

<div id="ui">
  <div id="hp">â¤ï¸ 100</div>
  <div id="ammo">ğŸ”« 6 / 6</div>
  <div id="reload"></div>
</div>

<button id="shoot">ğŸ”«</button>
<button id="reloadBtn">ğŸ”„</button>
<button id="view">ğŸ‘ï¸</button>

<script src="https://cdn.jsdelivr.net/npm/three@0.155.0/build/three.min.js"></script>

<script>
/* ===== THREE ===== */
const scene=new THREE.Scene();
scene.background=new THREE.Color(0xcfa46a);

const camera=new THREE.PerspectiveCamera(70,innerWidth/innerHeight,0.1,300);
const renderer=new THREE.WebGLRenderer({antialias:true});
renderer.setSize(innerWidth,innerHeight);
document.body.appendChild(renderer.domElement);

scene.add(new THREE.AmbientLight(0xffffff,.7));
const sun=new THREE.DirectionalLight(0xffffff,1);
sun.position.set(30,50,20);
scene.add(sun);

const ground=new THREE.Mesh(
  new THREE.PlaneGeometry(300,300),
  new THREE.MeshStandardMaterial({color:0xc2a46d})
);
ground.rotation.x=-Math.PI/2;
scene.add(ground);

/* ===== Roblox ìºë¦­í„° ===== */
const player=new THREE.Group();
scene.add(player);

/* ë¨¸ë¦¬ */
const head=new THREE.Mesh(
  new THREE.BoxGeometry(1.2,1.2,1.2),
  new THREE.MeshStandardMaterial({color:0xffdbac})
);
head.position.y=3.6;
player.add(head);

/* ëª¸í†µ */
const torso=new THREE.Mesh(
  new THREE.BoxGeometry(1.8,2.2,1),
  new THREE.MeshStandardMaterial({color:0x8b5a2b})
);
torso.position.y=2.2;
player.add(torso);

/* ì™¼íŒ” */
const leftArm=new THREE.Mesh(
  new THREE.BoxGeometry(0.5,2,0.5),
  new THREE.MeshStandardMaterial({color:0xffdbac})
);
leftArm.position.set(-1.15,2.2,0);
player.add(leftArm);

/* ì˜¤ë¥¸íŒ” (ì´ ë“œëŠ” íŒ”) */
const rightArm=new THREE.Mesh(
  new THREE.BoxGeometry(0.5,2,0.5),
  new THREE.MeshStandardMaterial({color:0xffdbac})
);
rightArm.position.set(1.15,2.2,0);
player.add(rightArm);

/* ë‹¤ë¦¬ */
function leg(x){
  const l=new THREE.Mesh(
    new THREE.BoxGeometry(0.6,2,0.6),
    new THREE.MeshStandardMaterial({color:0x444444})
  );
  l.position.set(x,1,0);
  player.add(l);
}
leg(-0.45); leg(0.45);

/* ===== ë¦¬ë³¼ë²„ ===== */
const gun=new THREE.Group();
gun.position.set(0.4,-0.8,0.4);
rightArm.add(gun);

/* í”„ë ˆì„ */
const frame=new THREE.Mesh(
  new THREE.BoxGeometry(1,0.3,0.3),
  new THREE.MeshStandardMaterial({color:0x222222})
);
gun.add(frame);

/* ì‹¤ë¦°ë” */
const cylinder=new THREE.Mesh(
  new THREE.CylinderGeometry(0.22,0.22,0.3,6),
  new THREE.MeshStandardMaterial({color:0x555555})
);
cylinder.rotation.z=Math.PI/2;
cylinder.position.x=-0.35;
gun.add(cylinder);

/* ===== ìƒíƒœ ===== */
let third=true;
let maxAmmo=6;
let ammo=6;
let reloading=false;

const ammoUI=document.getElementById("ammo");
const reloadUI=document.getElementById("reload");

/* ===== ì‚¬ìš´ë“œ ===== */
const shootSound=new Audio("https://cdn.pixabay.com/audio/2022/03/15/audio_92c6b43f8f.mp3");
const reloadSound=new Audio("https://cdn.pixabay.com/audio/2022/03/15/audio_5a4bba1f45.mp3");

/* ===== ì• ë‹ˆë©”ì´ì…˜ ê°’ ===== */
let armKick=0;
let gunKick=0;

/* ===== ë°œì‚¬ ===== */
function shoot(){
  if(ammo<=0 || reloading) return;

  ammo--;
  ammoUI.innerText=`ğŸ”« ${ammo} / ${maxAmmo}`;
  shootSound.currentTime=0; shootSound.play();

  /* ë°˜ë™ íŠ¸ë¦¬ê±° */
  armKick=0.4;
  gunKick=0.25;

  /* ì‹¤ë¦°ë” íšŒì „ */
  cylinder.rotation.x -= Math.PI/3;
}

/* ===== í•œ ë°œ ì¥ì „ ===== */
function reloadOne(){
  if(reloading || ammo>=maxAmmo) return;
  reloading=true;
  reloadUI.innerText="ì¥ì „ ì¤‘â€¦";
  reloadSound.currentTime=0;
  reloadSound.play();

  /* ì¥ì „ ëª¨ì…˜ */
  armKick=-0.3;

  setTimeout(()=>{
    ammo++;
    ammoUI.innerText=`ğŸ”« ${ammo} / ${maxAmmo}`;
    reloadUI.innerText="";
    reloading=false;
  },600);
}

/* ===== ë£¨í”„ ===== */
function animate(){
  requestAnimationFrame(animate);

  /* íŒ” ì• ë‹ˆë©”ì´ì…˜ */
  rightArm.rotation.x += armKick;
  armKick *= 0.6;

  /* ì´ ì• ë‹ˆë©”ì´ì…˜ */
  gun.position.z -= gunKick;
  gunKick *= 0.6;
  gun.position.z += gunKick;

  /* ì¹´ë©”ë¼ */
  camera.position.lerp(
    third
      ? new THREE.Vector3(player.position.x,6,player.position.z+8)
      : new THREE.Vector3(player.position.x,4.2,player.position.z+0.2),
    0.12
  );
  camera.lookAt(player.position.x,3,player.position.z);

  renderer.render(scene,camera);
}
animate();

/* ===== ë²„íŠ¼ ===== */
document.getElementById("shoot").onclick=shoot;
document.getElementById("reloadBtn").onclick=reloadOne;
document.getElementById("view").onclick=()=>third=!third;
</script>
</body>
</html>